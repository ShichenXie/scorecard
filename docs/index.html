<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Risk Scorecard â€¢ scorecard</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Credit Risk Scorecard">
<meta property="og:description" content="
  The `scorecard` package makes the development of credit risk scorecard 
  easier and efficient by providing functions for some common tasks, 
  such as data partition, variable selection, woe binning, scorecard scaling,
  performance evaluation and report generation. These functions can also used
  in the development of machine learning models.
    The references including: 
  1. Refaat, M. (2011, ISBN: 9781447511199). Credit Risk Scorecard: 
  Development and Implementation Using SAS. 
  2. Siddiqi, N. (2006, ISBN: 9780471754510). Credit risk scorecards. 
  Developing and Implementing Intelligent Credit Scoring.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">scorecard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/demo.html">Developing a Credit Scorcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://shichen.name/slide/20171115scorecard/" class="external-link">
    <span class="fa fa-file-powerpoint-o fa-lg"></span>
     
    slides
  </a>
</li>
<li>
  <a href="http://shichen.name/donate/" class="external-link">
    <span class="fa fa-money fa-lg"></span>
     
    donate
  </a>
</li>
<li>
  <a href="https://github.com/ShichenXie/scorecard" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="scorecard">scorecard<a class="anchor" aria-label="anchor" href="#scorecard"></a>
</h1></div>

<p>The goal of <code>scorecard</code> package is to make the development of the traditional credit risk scorecard model easier and efficient by providing functions for some common tasks that summarized in below. This package can also used in the development of machine learning models on binary classification.</p>
<ul>
<li>data preprocessing (<code>split_df</code>, <code>replace_na</code>, <code>one_hot</code>, <code>var_scale</code>)</li>
<li>weight of evidence (woe) binning (<code>woebin</code>, <code>woebin_plot</code>, <code>woebin_adj</code>, <code>woebin_ply</code>)</li>
<li>variable selection (<code>var_filter</code>, <code>iv</code>, <code>vif</code>)</li>
<li>performance evaluation (<code>perf_eva</code>, <code>perf_cv</code>, <code>perf_psi</code>)</li>
<li>scorecard scaling (<code>scorecard</code>, <code>scorecard2</code>, <code>scorecard_ply</code>)</li>
<li>scorecard report (<code>gains_table</code>, <code>report</code>)</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<ul>
<li>Install the release version of <code>scorecard</code> from <a href="https://cran.r-project.org/package=scorecard" class="external-link">CRAN</a> with:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"scorecard"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Install the latest version of <code>scorecard</code> from <a href="https://github.com/ShichenXie/scorecard" class="external-link">github</a> with:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"shichenxie/scorecard"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to develop a common credit risk scorecard:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Traditional Credit Scoring Using Logistic Regression</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ShichenXie/scorecard" class="external-link">scorecard</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># data preparing ------</span></span>
<span><span class="co"># load germancredit data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"germancredit"</span><span class="op">)</span></span>
<span><span class="co"># filter variable via missing rate, iv, identical value rate</span></span>
<span><span class="va">dt_f</span> <span class="op">=</span> <span class="fu"><a href="reference/var_filter.html">var_filter</a></span><span class="op">(</span><span class="va">germancredit</span>, y<span class="op">=</span><span class="st">"creditability"</span><span class="op">)</span></span>
<span><span class="co"># breaking dt into train and test</span></span>
<span><span class="va">dt_list</span> <span class="op">=</span> <span class="fu"><a href="reference/split_df.html">split_df</a></span><span class="op">(</span><span class="va">dt_f</span>, y<span class="op">=</span><span class="st">"creditability"</span>, ratios <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.4</span><span class="op">)</span>, seed <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">label_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dt_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">creditability</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># woe binning ------</span></span>
<span><span class="va">bins</span> <span class="op">=</span> <span class="fu"><a href="reference/woebin.html">woebin</a></span><span class="op">(</span><span class="va">dt_f</span>, y<span class="op">=</span><span class="st">"creditability"</span><span class="op">)</span></span>
<span><span class="co"># woebin_plot(bins)</span></span>
<span></span>
<span><span class="co"># binning adjustment</span></span>
<span><span class="co">## adjust breaks interactively</span></span>
<span><span class="co"># breaks_adj = woebin_adj(dt_f, "creditability", bins) </span></span>
<span><span class="co">## or specify breaks manually</span></span>
<span><span class="va">breaks_adj</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  age.in.years<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">26</span>, <span class="fl">35</span>, <span class="fl">40</span><span class="op">)</span>,</span>
<span>  other.debtors.or.guarantors<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"co-applicant%,%guarantor"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">bins_adj</span> <span class="op">=</span> <span class="fu"><a href="reference/woebin.html">woebin</a></span><span class="op">(</span><span class="va">dt_f</span>, y<span class="op">=</span><span class="st">"creditability"</span>, breaks_list<span class="op">=</span><span class="va">breaks_adj</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># converting train and test into woe values</span></span>
<span><span class="va">dt_woe_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dt_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="reference/woebin_ply.html">woebin_ply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">bins_adj</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># glm / selecting variables ------</span></span>
<span><span class="va">m1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span> <span class="va">creditability</span> <span class="op">~</span> <span class="va">.</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">dt_woe_list</span><span class="op">$</span><span class="va">train</span><span class="op">)</span></span>
<span><span class="co"># vif(m1, merge_coef = TRUE) # summary(m1)</span></span>
<span><span class="co"># Select a formula-based model by AIC (or by LASSO for large dataset)</span></span>
<span><span class="va">m_step</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/step.html" class="external-link">step</a></span><span class="op">(</span><span class="va">m1</span>, direction<span class="op">=</span><span class="st">"both"</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">m2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="va">m_step</span><span class="op">$</span><span class="va">call</span><span class="op">)</span></span>
<span><span class="co"># vif(m2, merge_coef = TRUE) # summary(m2)</span></span>
<span></span>
<span><span class="co"># performance ks &amp; roc ------</span></span>
<span><span class="co">## predicted proability</span></span>
<span><span class="va">pred_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dt_woe_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">m2</span>, <span class="va">x</span>, type<span class="op">=</span><span class="st">'response'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## Adjusting for oversampling (support.sas.com/kb/22/601.html)</span></span>
<span><span class="co"># card_prob_adj = scorecard2(bins_adj, dt=dt_list$train, y='creditability', </span></span>
<span><span class="co">#                x=sub('_woe$','',names(coef(m2))[-1]), badprob_pop=0.03, return_prob=TRUE)</span></span>
<span>                </span>
<span><span class="co">## performance</span></span>
<span><span class="va">perf</span> <span class="op">=</span> <span class="fu"><a href="reference/perf_eva.html">perf_eva</a></span><span class="op">(</span>pred <span class="op">=</span> <span class="va">pred_list</span>, label <span class="op">=</span> <span class="va">label_list</span><span class="op">)</span></span>
<span><span class="co"># perf_adj = perf_eva(pred = card_prob_adj$prob, label = label_list$train)</span></span>
<span></span>
<span><span class="co"># score ------</span></span>
<span><span class="co">## scorecard</span></span>
<span><span class="va">card</span> <span class="op">=</span> <span class="fu"><a href="reference/scorecard.html">scorecard</a></span><span class="op">(</span><span class="va">bins_adj</span>, <span class="va">m2</span><span class="op">)</span></span>
<span><span class="co">## credit score</span></span>
<span><span class="va">score_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dt_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="reference/scorecard_ply.html">scorecard_ply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">card</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## psi</span></span>
<span><span class="fu"><a href="reference/perf_psi.html">perf_psi</a></span><span class="op">(</span>score <span class="op">=</span> <span class="va">score_list</span>, label <span class="op">=</span> <span class="va">label_list</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make cutoff decisions -----</span></span>
<span><span class="co">## gains table</span></span>
<span><span class="va">gtbl</span> <span class="op">=</span> <span class="fu"><a href="reference/gains_table.html">gains_table</a></span><span class="op">(</span>score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">score_list</span><span class="op">)</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">label_list</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=scorecard" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ShichenXie/scorecard/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ShichenXie/scorecard/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing scorecard</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Shichen Xie <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ShichenXie/scorecard" class="external-link"><img src="https://travis-ci.org/ShichenXie/scorecard.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://cran.r-project.org/package=scorecard" class="external-link"><img src="https://www.r-pkg.org/badges/version/scorecard" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=scorecard" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/scorecard"></a></li>
<li><a href="https://cran.r-project.org/package=scorecard" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/scorecard"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Shichen Xie.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
